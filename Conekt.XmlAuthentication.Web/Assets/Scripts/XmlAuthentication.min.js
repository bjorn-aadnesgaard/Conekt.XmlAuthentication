$(function(){$(".login [data-hide]").on("click",function(){xmlauth.alert("")})});var xmlauth={login:function(){$(".login .btn").button("loading"),xmlauth.alert("reset"),$.ajax({type:"POST",url:"/App_WebServices/Xml/Authentication.asmx/Login",data:'{ "email": "'+$("#email").val()+'", "password" : "'+$("#password").val()+'" }',contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(n){var t=$(".login .alert div");t.html(n.d.Message);switch(n.d.Status){case 0:xmlauth.alert("alert-danger"),xmlauth.formClear();break;case 1:xmlauth.alert("alert-success"),xmlauth.formClear(),$(".anonymous").hide(),$(".authenticated").show()}}).fail(function(n){var i=$.parseJSON(n.responseText),t;xmlauth.alert("alert-danger"),t=$(".login .alert div"),t.html(i.Message)}).always(function(){$(".login .btn").button("reset")})},logout:function(){xmlauth.alert("reset"),$.ajax({type:"POST",url:"/App_WebServices/Xml/Authentication.asmx/Logout",data:"{}",contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(){xmlauth.alert("alert-success");var n=$(".login .alert div");n.html("You are now <strong>logged out<\/strong>."),$(".anonymous").show(),$(".authenticated").hide()}).fail(function(n){var i=$.parseJSON(n.responseText),t;xmlauth.alert("alert-danger"),t=$(".login .alert div"),t.html(i.Message)})},show:function(n){var r,t,i;if(xmlauth.alert("reset"),r=!1,$.ajax({type:"GET",url:"/App_WebServices/Xml/Authentication.asmx/IsAuthenticated",data:"{}",contentType:"application/json; charset=utf-8",dataType:"json",async:!1}).done(function(n){r=n.d}),t=$(".login .anonymous"),i=$(".login .authenticated"),t.hide(),i.hide(),r){i.show();return}switch(n){case"anon":t.show();break;case"auth":i.show();break;default:t.show()}},alert:function(n){var t=$(".login .alert");n!=undefined&&n!="reset"?t.is(":visible")?t.hide().removeClass().addClass("alert"):t.removeClass().addClass("alert "+n).show():t.hide().removeClass().addClass("alert")},formClear:function(){$('.login input[type="password"]').val(""),$(".login .reset .email").val("")},passwordReset:function(){$(".login .reset .btn").button("loading"),xmlauth.alert("reset"),$.ajax({type:"POST",url:"/App_WebServices/Xml/Authentication.asmx/PasswordReset",data:'{ "email": "'+$(".login .reset .email").val()+'" }',contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(n){var t=$(".login .alert div");t.html(n.d.Message);switch(n.d.Status){case 0:xmlauth.alert("alert-danger");break;case 1:xmlauth.alert("alert-success")}}).fail(function(n){var i=$.parseJSON(n.responseText),t;xmlauth.alert("alert-danger"),t=$(".login .alert div"),t.html(i.Message)}).always(function(){$(".login .reset .btn").button("reset"),formClear()})},passwordChange:function(){$(".login .reset .btn").button("loading"),xmlauth.alert("reset");var n=xmlauth.parameters();email=n.email,token=n.token,$.ajax({type:"POST",url:"/App_WebServices/Xml/Authentication.asmx/PasswordChange",data:'{ "email": "'+email+'", "token": "'+(token!=undefined?token:null)+'", "oldPassword": "'+$(".login .reset #oldPassword").val()+'", "newPassword": "'+$(".login .reset #newPassword").val()+'" }',contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(n){var t=$(".login .alert div");t.html(n.d.Message);switch(n.d.Status){case 0:xmlauth.alert("alert-danger");break;case 1:xmlauth.alert("alert-success"),$(".login .reset .content").hide(),$(".login .reset .success").show()}}).fail(function(n){var i=$.parseJSON(n.responseText),t;xmlauth.alert("alert-danger"),t=$(".login .alert div"),t.html(i.Message)}).always(function(){$(".login .reset .btn").button("reset"),formClear()})},accountCreate:function(){$(".login .create .btn").button("loading"),xmlauth.alert("reset"),$.ajax({type:"POST",url:"/App_WebServices/Xml/Authentication.asmx/AccountCreate",data:'{ "email": "'+$(".login .create #email").val()+'", "password": "'+$(".login .create #password").val()+'" }',contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(n){var t=$(".login .alert div");t.html(n.d.Message);switch(n.d.Status){case 0:xmlauth.alert("alert-danger");break;case 1:xmlauth.alert("alert-success"),$(".login .create .content").hide(),$(".login .create .success").show()}}).fail(function(n){var i=$.parseJSON(n.responseText),t;xmlauth.alert("alert-danger"),t=$(".login .alert div"),t.html(i.Message)}).always(function(){$(".login .create .btn").button("reset")})},load:function(n,t){var i=$("#page-content");i.html('<div style="text-align: center; padding: 20px 0px;"><img src="/assets/styles/images/loading.gif" /><\/div>'),n.indexOf("?")!=-1&&(n=n.substring(0,n.indexOf("?"))),$.ajax({type:"POST",url:"/App_WebServices/Xml/Authentication.asmx/Load",data:'{ "content": "'+n+'" }',contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(n){i.html(n.d)}).fail(function(n){var t=$.parseJSON(n.responseText);alert(t.Message)}).always(function(){typeof t=="function"&&t.call(this)})},parameters:function(){for(var t,u=/\+/g,f=/([^&=]+)=?([^&]*)/g,r=function(n){return decodeURIComponent(n.replace(u," "))},n=window.location.hash.replace("#!/",""),n=n.substring(n.indexOf("?")+1),i={};t=f.exec(n);)i[r(t[1])]=r(t[2]);return i}};
//@ sourceMappingURL=XmlAuthentication.min.js.map